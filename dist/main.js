!function(){"use strict";!function(){class t{constructor(t,s,i){this.x=t,this.y=s,this.color=i,this.originalColor=i,this.status="floating"}flash(){this.color=t.FLASHING,this.status="flashing"}flashing(){return this.color===t.FLASHING}sink(){this.color=t.SUNK,this.status="sunk"}reset(){this.color=this.originalColor,this.status="floating"}}t.FLASHING="#550077",t.SUNK="#000000";var s=t;const i=document.querySelector("canvas");i.width=window.innerWidth,i.height=window.innerHeight;const e=i.getContext("2d"),r=new class{constructor(t,i){this.raft=new class{constructor(t,s){this.grid=this.makeGrid(),this.size=this.getSize(),this.canvas=t,this.c=s}makeGrid(){let t=[],i="#A46233";for(let e=0;e<7;e++){t.push([]);for(let r=0;r<7;r++)t[e].push(new s(e,r,i)),i=this.colorSwitch(i)}return t}getSize(){let t=0;for(let s=0;s<this.grid.length;s++)for(let s=0;s<this.grid[0].length;s++)t++;return t}flashSquares(t){let s=Math.floor(this.size*(t/100)),i=Math.sqrt(this.size);for(;s>0;){let t=Math.floor(Math.random()*i),e=Math.floor(Math.random()*i),r=this.grid[t][e];r.flashing()||(r.flash(),s--)}console.log(this),this.draw()}dropSquares(){for(let t=0;t<Math.sqrt(this.size);t++)for(let s=0;s<Math.sqrt(this.size);s++){let i=this.grid[t][s];"flashing"===i.status&&i.sink()}}resetSquares(){for(let t=0;t<Math.sqrt(this.size);t++)for(let s=0;s<Math.sqrt(this.size);s++)this.grid[t][s].reset()}draw(){let t,i=[];for(let e=0;e<7;e++)for(let r=0;r<7;r++)i.push(new s(e,r,t)),t=this.colorSwitch(t);let e=this.canvas.width/2,r=this.canvas.height/2;for(let t=0;t<Math.sqrt(this.size);t++)for(let s=0;s<Math.sqrt(this.size);s++){let i=this.grid[t][s];"sunk"!==i.status&&(this.c.fillStyle=i.color,this.c.fillRect(100*i.x+e-350,100*i.y+r-350,100,100))}}colorSwitch(t){return"#A46233"===t?"#8B4513":"#A46233"}}(t,i),this.player=new class{constructor(){this.status="alive"}chooseSquare(t,s){return[t,s]}}}play(){for(;"alive"===this.player.status;){this.raft.flashSquares(20);let t=this.player.chooseSquare(1,1);this.raft.dropSquares(),"X"===this.raft.grid[t[0]][t[1]]?(console.log("you lose"),this.player.status="dead"):console.log("you survived!")}console.log("exited loop")}}(i,e);new class{constructor(t,s,i){this.canvas=t,this.c=s,this.startX=this.canvas.width/2-250,this.startY=this.canvas.height/2-250,this.game=i,this.background=new Image}animate(){this.c.clearRect(0,0,this.canvas.width,this.canvas.height),requestAnimationFrame(this.animate.bind(this)),this.background.src="./assets/aqua.jpg",this.c.drawImage(this.background,0,0),this.game.raft.draw()}start(){console.log(this);let t=0;setInterval((()=>{t%3==0?this.game.raft.flashSquares(80):t%3==1?this.game.raft.dropSquares():this.game.raft.resetSquares(),t++}),1500),requestAnimationFrame(this.animate.bind(this))}}(i,e,r).start(),document.addEventListener("keydown",(t=>{"f"===t.key?r.raft.flashSquares(10):"d"===t.key?r.raft.dropSquares():"r"===t.key&&r.raft.resetSquares()}))}()}();
//# sourceMappingURL=main.js.map
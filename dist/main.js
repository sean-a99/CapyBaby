!function(){"use strict";!function(){class t{constructor(t,s,i){this.x=t,this.y=s,this.color=i,this.originalColor=i,this.status="floating"}flash(){this.color=t.FLASHING,this.status="flashing"}flashing(){return this.color===t.FLASHING}sink(){this.color=t.SUNK,this.status="sunk"}reset(){this.color=this.originalColor,this.status="floating"}}t.FLASHING="#550077",t.SUNK="#000000";var s=t;const i=document.querySelector("canvas");i.width=window.innerWidth,i.height=window.innerHeight;const e=i.getContext("2d"),h=new class{constructor(t,i){this.raft=new class{constructor(t,s){this.grid=this.makeGrid(),this.size=this.getSize(),this.canvas=t,this.c=s}makeGrid(){let t=[],i="#A46233";for(let e=0;e<7;e++){t.push([]);for(let h=0;h<7;h++)t[e].push(new s(e,h,i)),i=this.colorSwitch(i)}return t}getSize(){let t=0;for(let s=0;s<this.grid.length;s++)for(let s=0;s<this.grid[0].length;s++)t++;return t}flashSquares(t){let s=Math.floor(this.size*(t/100)),i=Math.sqrt(this.size);for(;s>0;){let t=Math.floor(Math.random()*i),e=Math.floor(Math.random()*i),h=this.grid[t][e];h.flashing()||(h.flash(),s--)}this.draw()}dropSquares(){for(let t=0;t<Math.sqrt(this.size);t++)for(let s=0;s<Math.sqrt(this.size);s++){let i=this.grid[t][s];"flashing"===i.status&&i.sink()}}resetSquares(){for(let t=0;t<Math.sqrt(this.size);t++)for(let s=0;s<Math.sqrt(this.size);s++)this.grid[t][s].reset()}draw(){let t,i=[];for(let e=0;e<7;e++)for(let h=0;h<7;h++)i.push(new s(e,h,t)),t=this.colorSwitch(t);let e=this.canvas.width/2,h=this.canvas.height/2;for(let t=0;t<Math.sqrt(this.size);t++)for(let s=0;s<Math.sqrt(this.size);s++){let i=this.grid[t][s];"sunk"!==i.status&&(this.c.fillStyle=i.color,this.c.fillRect(100*i.x+e-350,100*i.y+h-350,100,100))}}colorSwitch(t){return"#A46233"===t?"#8B4513":"#A46233"}}(t,i),this.player=new class{constructor(t,s){this.status="alive",this.width=90,this.height=60,this.startPos=[t.width/2-this.width/2,t.height/2-this.height/2],this.pos=this.startPos,this.c=s,this.canvas=t,this.dx=0,this.dy=0,this.movement="idle",this.capyLeft=new Image,this.capyLeft.src="../assets/the_real_walk.png",this.capyRight=new Image,this.capyRight.scr="..assets/"}chooseSquare(t,s){return[t,s]}printPos(t){this.move(this.dx,this.dy),this.chooseSprite();let s=Math.floor(t/8),[i,e]=this.pos;this.c.fillStyle="#000000",this.c.drawImage(this.capyLeft,75+240*s,0,240,188,i,e,90,70)}move(t,s){let[i,e]=this.pos;i+=t,e+=s,this.pos=[i,e]}chooseSprite(){this.dx>0?this.movement="right":this.dx<0&&(this.movement="left")}}(t,i),this.score=0}play(){for(;"alive"===this.player.status;){this.raft.flashSquares(20);let t=this.player.chooseSquare(1,1);this.raft.dropSquares(),"X"===this.raft.grid[t[0]][t[1]]?(console.log("you lose"),this.player.status="dead"):console.log("you survived!")}console.log("exited loop")}}(i,e);new class{constructor(t,s,i){this.canvas=t,this.c=s,this.startX=this.canvas.width/2-250,this.startY=this.canvas.height/2-250,this.game=i,this.background=new Image,this.background.src="./assets/aqua.jpg",this.frame=0,this.moveFrame=0,this.time=0,setInterval((()=>{this.time+=1,console.log(this.time)}),1e3)}animate(){this.c.clearRect(0,0,this.canvas.width,this.canvas.height),requestAnimationFrame(this.animate.bind(this)),this.c.drawImage(this.background,0,0),this.game.raft.draw(),this.game.player.printPos(this.moveFrame),this.scoreboard(),this.frame+=1,this.moveFrame>=39?this.moveFrame=0:this.moveFrame++}start(){this.loop(),requestAnimationFrame(this.animate.bind(this))}loop(){let t=0;setInterval((()=>{t%3==0?this.game.raft.flashSquares(60):t%3==1?this.game.raft.dropSquares():(this.game.raft.resetSquares(),this.game.score+=100),t++}),1200)}scoreboard(){this.c.fillStyle="rgba(100, 100, 100, .6)",this.c.fillRect(0,0,300,100),this.c.font="30px sans serif",this.c.fillStyle="#FFFFFF",this.c.fillText(`SCORE:      ${this.game.score}`,30,60)}}(i,e,h).start(),document.addEventListener("keypress",(t=>{"w"===t.key?h.player.dy=-5:"d"===t.key?h.player.dx=5:"s"===t.key?h.player.dy=5:"a"===t.key&&(h.player.dx=-5)})),document.addEventListener("keyup",(t=>{"w"===t.key?h.player.dy=0:"d"===t.key?h.player.dx=0:"s"===t.key?h.player.dy=0:"a"===t.key&&(h.player.dx=0)}))}()}();
//# sourceMappingURL=main.js.map
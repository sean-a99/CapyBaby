!function(){"use strict";!function(){class t{constructor(t,s,i){this.x=t,this.y=s,this.color=i,this.originalColor=i,this.status="floating"}flash(){this.color=t.FLASHING,this.status="flashing"}flashing(){return this.color===t.FLASHING}sink(){this.color=t.SUNK,this.status="sunk"}}t.FLASHING="#FF0000",t.SUNK="#FFFFFF";var s=t;const i=document.querySelector("canvas");i.width=window.innerWidth,i.height=window.innerHeight;const e=i.getContext("2d"),h=new class{constructor(t,i){this.raft=new class{constructor(t,s){this.grid=this.makeGrid(),this.size=this.getSize(),this.canvas=t,this.c=s}makeGrid(){let t=[],i="#A46233";for(let e=0;e<7;e++){t.push([]);for(let h=0;h<7;h++)t[e].push(new s(e,h,i)),i=this.colorSwitch(i)}return t}getSize(){let t=0;for(let s=0;s<this.grid.length;s++)for(let s=0;s<this.grid[0].length;s++)t++;return t}flashSquares(t){let s=Math.floor(this.size*(t/100)),i=Math.sqrt(this.size);for(;s>0;){let t=Math.floor(Math.random()*i),e=Math.floor(Math.random()*i),h=this.grid[t][e];h.flashing()||(h.flash(),s--)}this.draw(this.c)}dropSquares(){for(let t=0;t<Math.sqrt(this.size);t++)for(let s=0;s<Math.sqrt(this.size);s++)"W"===this.grid[t][s]&&(this.grid[t][s]="X")}resetSquares(){for(let t=0;t<Math.sqrt(this.size);t++)for(let s=0;s<Math.sqrt(this.size);s++)this.grid[t][s]="O"}draw(t){let i,e=[];for(let t=0;t<7;t++)for(let h=0;h<7;h++)e.push(new s(t,h,i)),i=this.colorSwitch(i);let h=this.canvas.width/2,r=this.canvas.height/2;for(let t=0;t<e;t++){let s=e[t];this.c.fillStyle=s.color,this.c.fillRect(100*s.x+h-350,100*s.y+r-350,100,100)}for(let t=0;t<Math.sqrt(this.size);t++)for(let s=0;s<Math.sqrt(this.size);s++){let i=this.grid[t][s];this.c.fillStyle=i.color,this.c.fillRect(100*i.x+h-350,100*i.y+r-350,100,100)}}colorSwitch(t){return"#A46233"===t?"#8B4513":"#A46233"}}(t,i),this.player=new class{constructor(){this.status="alive"}chooseSquare(t,s){return[t,s]}}}play(){for(;"alive"===this.player.status;){this.raft.flashSquares(20);let t=this.player.chooseSquare(1,1);this.raft.dropSquares(),"X"===this.raft.grid[t[0]][t[1]]?(console.log("you lose"),this.player.status="dead"):console.log("you survived!")}console.log("exited loop")}}(i,e);new class{constructor(t,s,i){this.canvas=t,this.c=s,this.startX=this.canvas.width/2-250,this.startY=this.canvas.height/2-250,this.game=i,this.background=new Image}animate(){this.c.clearRect(0,0,this.canvas.width,this.canvas.height),requestAnimationFrame(this.animate.bind(this)),this.background.src="./assets/aqua.jpg",this.c.drawImage(this.background,0,0),this.game.raft.draw(this.c)}}(i,e,h).animate(),document.addEventListener("click",(()=>{h.raft.flashSquares(5)}))}()}();
//# sourceMappingURL=main.js.map